<div *ngIf="(isAdmin)  &&
            (round === actualTournament.actualRound) &&
             !actualTournament.finished && !rankingsFullscreenMode && !gamesFullscreenMode && !swapPlayerMode"
     class="action-card-container">
  <md-card class="action-card">
    <div class="action-button-wrapper">
      <button *ngIf="allGamesUntouched"
              (click)="openPairAgainDialog()"
              type="button"
              class="color-positive-background action-button"
              md-raised-button>
        <md-icon>undo</md-icon>
        Pair Again
      </button>
      <button *ngIf="allGamesFinished"
              (click)="openNewTeamRoundDialog()"
              type="button"
              class="color-positive-background action-button"
              md-raised-button>
        <md-icon>play_arrow</md-icon>
        New Round
      </button>

      <button *ngIf="allGamesFinished"
              (click)="openFinishTournamentDialog()"
              type="button"
              class="color-positive-background action-button"
              md-raised-button>
        <md-icon>flag</md-icon>
        End Tournament
      </button>

      <button *ngIf="actualTournament.visibleRound < actualTournament.actualRound"
              (click)="publishRound()"
              type="button"
              class="color-positive-background action-button"
              md-raised-button>
        <md-icon>cloud_upload</md-icon>
        Publish Round
      </button>

      <button (click)="openKillRoundDialog()"
              type="button"
              class="color-negative-background action-button"
              md-raised-button>
        <md-icon>warning</md-icon>
        Kill Round
      </button>
    </div>
  </md-card>
</div>
<div class="content-cards-container">
  <md-card *ngIf="!rankingsFullscreenMode" class="games-for-round-card">
    <h3 class="heading">Games Round {{round}}</h3>
    <mdl-icon (click)="printGames()" mdTooltip="Print Games" class="print-games-icon">print</mdl-icon>
    <mdl-icon *ngIf="!gamesFullscreenMode" (click)="openGamesFullScreenMode(true)" mdTooltip="Fullscreen Mode"
              class="fullscreen-mode">fullscreen
    </mdl-icon>
    <mdl-icon *ngIf="gamesFullscreenMode" (click)="openGamesFullScreenMode(false)" mdTooltip="Exit Fullscreen Mode"
              class="fullscreen-mode">fullscreen_exit
    </mdl-icon>
    <mdl-icon *ngIf="!gamesTableMode" (click)="changeToTableMode(true)" mdTooltip="Table Mode" class="table-mode">list
    </mdl-icon>
    <mdl-icon *ngIf="gamesTableMode" (click)="changeToTableMode(false)" mdTooltip="Exit Table Mode" class="table-mode">
      view_list
    </mdl-icon>
    <mdl-textfield *ngIf="!gamesFullscreenMode"
                   type="text"
                   maxlength="50"
                   placeholder="Filter by Team/TableNumber"
                   class="filter-textfield"
                   #seachInput
                   (keyup)="search(seachInput.value)">
    </mdl-textfield>
    <button *ngIf="!gamesFullscreenMode && isTournamentPlayer && !showOnlyMyGameState"
            class="my-game-button color-secondary-background"
            type="button"
            md-tooltip="Show only MyGame" (click)="showOnlyMyGame()"
            md-raised-button>
      Show MyGame
    </button>

    <button *ngIf="!gamesFullscreenMode && isTournamentPlayer && showOnlyMyGameState"
            class="my-game-button color-secondary-background"
            type="button"
            md-tooltip="Show all" (click)="showAllGames()"
            md-raised-button>
      Show All
    </button>
    <h4 *ngIf="allGamesFiltered?.length == 0" class="heading">No Games found (Filter?)</h4>
    <tournament-team-game-list *ngIf="!gamesTableMode"
                               [round]="round"
                               [isAdmin]="isAdmin"
                               [actualTournament]="actualTournament"
                               [actualTournamentTeams$]="actualTournamentTeams$"
                               [authenticationStoreState$]="authenticationStoreState$"
                               [actualTournamentArmyLists$]="actualTournamentArmyLists$"
                               [teamGamesForRound]="allGamesFiltered"
                               [playerGamesForRound$]="playerGamesForRound$"
                               [rankingsForRound$]="teamRankingsForRound$"
                               (onTeamMatchGameResult)="handleTeamGameResult($event)"
                               (onScenarioSelectedForTeamTournament)="handleScenarioSelectedForTeamTournament($event)"
                               (onSwapPlayer)="handleSwapPlayer($event)"
                               (onSwapTeam)="handleSwapTeam($event)"
                               (onClearPlayerGameResult)="handleClearPlayerGameResult($event)"
                               (onClearTeamGameResult)="handleClearTeamGameResult($event)"
    ></tournament-team-game-list>

    <tournament-game-table *ngIf="gamesTableMode"
                           [games]="allGamesFiltered"
    ></tournament-game-table>
  </md-card>
  <md-card *ngIf="!gamesFullscreenMode" class="tournament-ranking-table-card">
    <h3 class="heading">Rankings Round {{round}}</h3>
    <mdl-icon (click)="printRankings()" mdTooltip="Print Rankings" class="print-rankings-icon">print</mdl-icon>
    <mdl-icon *ngIf="!rankingsFullscreenMode" (click)="openRankingsFullScreenMode(true)" mdTooltip="Fullscreen Mode"
              class="fullscreen-mode">fullscreen
    </mdl-icon>
    <mdl-icon *ngIf="rankingsFullscreenMode" (click)="openRankingsFullScreenMode(false)"
              mdTooltip="Exit Fullscreen Mode" class="fullscreen-mode">fullscreen_exit
    </mdl-icon>
    <mdl-icon (click)="openSoloRankingForTeamTournament()"
              mdTooltip="Solo Rankings" class="solo-ranking-in-team">face
    </mdl-icon>
    <tournament-team-ranking-list
      [isAdmin]="isAdmin"
      [round]="round"
      [actualTournament]="actualTournament"
      [actualTournamentArmyList$]="armyLists$"
      [teamRankingsForRound$]="teamRankingsForRound$"
      [playerRankingsForRound$]="playerRankingsForRound$"
      [userPlayerData]="userPlayerData"
      (onDropTeam)="handleDropTeam($event)"
      (onUndoDropTeam)="handleUndoDropTeam($event)"
    ></tournament-team-ranking-list>
  </md-card>
</div>
