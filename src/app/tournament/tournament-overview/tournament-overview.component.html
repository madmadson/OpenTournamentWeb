<h4 *ngIf="!fullscreenMode" class="heading">{{actualTournament?.name}}</h4>

<ng-container *ngIf="!actualTournament">
  <div class="heading">Load Tournament...
    <mdl-spinner class="loading-spinner" single-color active></mdl-spinner>
  </div>
</ng-container>


<div class="tab-container">
  <mdl-tabs *ngIf="actualTournament" mdl-ripple [mdl-tab-active-index]="selectedIndex">
    <mdl-tab-panel mdl-tab-panel-title="{{getPrepPageTitle()}}" [disabled]="fullscreenMode || swapPlayerMode">
      <div class="content-cards-container">
        <tournament-preparation
          [authenticationStoreState$]="authenticationStoreState$"
          [actualTournament]="actualTournament"
          [actualTournamentArmyList$]="actualTournamentArmyList$"
          [allActualTournamentPlayers$]="allActualTournamentPlayers$"
          [actualTournamentRegisteredPlayers$]="actualTournamentRegisteredPlayers$"
          [actualTournamentTeams$]="actualTournamentTeams$"
          [actualTournamentTeamRegistrations$]="actualTournamentTeamRegistrations$"
          (onStartTournament)="handleStartTournament($event)"
          (onStartTeamTournament)="handleStartTeamTournament($event)"
          (onSaveTournament)="handleEditTournament($event)"
          (onAddDummyPlayer)="handleAddDummyPlayer()"
          (onAddDummyTeam)="handleAddDummyTeam()"
          (onAddTournamentPlayer)="handleAddTournamentPlayer($event)"
          (onAcceptRegistration)="handleAcceptRegistration($event)"
          (onAddTournamentRegistration)="handleAddTournamentRegistration($event)"
          (onAddArmyList)="handleAddArmyList($event)"
          (onDeleteArmyList)="handleDeleteArmyList($event)"
          (onDeleteTournamentPlayer)="handleDeleteTournamentPlayer($event)"
          (onDeleteRegistration)="handleDeleteRegistration($event)"
          (onEraseTournamentTeam)="handleEraseTeam($event)"
          (onCreateTeamForTeamTournament)="handleCreateTeamForTeamTournament($event)"
          (onRegisterTeamForTeamTournament)="handleRegisterTeamForTeamTournament($event)"
          (onAcceptTeamRegistration)="handleAcceptTeamRegistration($event)"
          (onEraseTeamRegistration)="handleEraseTeamRegistration($event)"
        ></tournament-preparation>
      </div>
    </mdl-tab-panel>

    <mdl-tab-panel *ngFor=" let round of getArrayForNumber(actualTournament?.actualRound) ;let index = index;"
                   mdl-tab-panel-title="{{getRoundPageTitle(index +1)}}"
                   [disabled]="fullscreenMode || swapPlayerMode">
      <tournament-round-overview *ngIf="actualTournament.teamSize === 0"
                                 [round]="round"
                                 [actualTournament]="actualTournament"
                                 [authenticationStoreState$]="authenticationStoreState$"
                                 [actualTournamentArmyLists$]="actualTournamentArmyList$"
                                 [gamesForRound$]="getGamesForRound(round)"
                                 [rankingsForRound$]="getRankingsForRound(round)"
                                 (onPairAgain)="handlePairAgain($event)"
                                 (onNewRound)="handleNewRound($event)"
                                 (onKillRound)="handleKillRound($event)"
                                 (onSwapPlayer)="handleSwapPlayer($event)"
                                 (onGameResult)="handleGameResult($event)"
                                 (onScenarioSelected)="handleScenarioSelected($event)"
                                 (onPublishRound)="handlePublishRound($event)"
                                 (onEndTournament)="handleEndTournament($event)"
      ></tournament-round-overview>
      <tournament-team-round-overview *ngIf="actualTournament.teamSize > 0"
                                      [round]="round"
                                      [actualTournament]="actualTournament"
                                      [authenticationStoreState$]="authenticationStoreState$"
                                      [actualTournamentArmyLists$]="actualTournamentArmyList$"
                                      [playerGamesForRound$]="getGamesForRound(round)"
                                      [teamGamesForRound$]="getTeamGamesForRound(round)"
                                      [playerRankingsForRound$]="getRankingsForRound(round)"
                                      [teamRankingsForRound$]="getTeamRankingsForRound(round)"
                                      (onKillTeamMatchRound)="handleKillRound($event)"
                                      (onPairTeamMatchAgain)="handlePairAgain($event)"
                                      (onNewRoundTeamMatch)="handleNewRoundTeamMatch($event)"
                                      (onSwapPlayer)="handleSwapPlayer($event)"
                                      (onSwapTeam)="handleSwapTeam($event)"
                                      (onTeamGameResult)="handleTeamGameResult($event)"
                                      (onPublishRound)="handlePublishRound($event)"
                                      (onEndTeamTournament)="handleEndTeamTournament($event)"
                                      (onScenarioSelectedForTeamTournament)="handleScenarioSelectedForTeamTournament($event)"
      ></tournament-team-round-overview>
    </mdl-tab-panel>
    <mdl-tab-panel [disabled]="fullscreenMode || swapPlayerMode"
                   *ngIf="actualTournament?.finished" mdl-tab-panel-title="Final">
      <div class="content-cards-container">
        <tournament-final-rankings *ngIf="actualTournament.teamSize === 0"
                                   [actualTournament]="actualTournament"
                                   [authenticationStoreState$]="authenticationStoreState$"
                                   [actualTournamentArmyList$]="actualTournamentArmyList$"
                                   [finalPlayerRankings$]="getFinalPlayerRankings()"
                                   (onUndoTournamentEnd)="handleUndoTournamentEnd($event)"
                                   (onUploadTournament)="handleUploadTournament()">
        </tournament-final-rankings>
        <tournament-team-final-rankings *ngIf="actualTournament.teamSize > 0"
                                        [actualTournament]="actualTournament"
                                        [authenticationStoreState$]="authenticationStoreState$"
                                        [actualTournamentArmyList$]="actualTournamentArmyList$"
                                        [finalPlayerRankings$]="getFinalPlayerRankings(round)"
                                        [finalTeamRankings$]="getFinalTeamRankings(round)"
                                        (onUndoTeamTournamentEnd)="handleUndoTeamTournamentEnd($event)"
                                        (onUploadTeamTournament)="handleUploadTeamTournament()">
        </tournament-team-final-rankings>
      </div>
    </mdl-tab-panel>
  </mdl-tabs>
</div>

