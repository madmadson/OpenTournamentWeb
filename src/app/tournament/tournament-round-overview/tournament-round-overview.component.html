
<div *ngIf="(currentUserId === actualTournament?.creatorUid)  &&
            (round === actualTournament.actualRound) &&
             !actualTournament.finished && !rankingsFullscreenMode && !gamesFullscreenMode"
     class="action-card-container">
  <md-card class="action-card" >
    <button *ngIf="allGamesUntouched"
            (click)="openPairAgainDialog()"
            type="button"
            color="accent"
            md-raised-button>
      <md-icon>undo</md-icon>
      Pair Again
    </button>
    <button *ngIf="allGamesFinished"
            (click)="openNewRoundDialog()"
            type="button"
            class="positive-background"
            md-raised-button>
      <md-icon>play_arrow</md-icon>
      New Round
    </button>
    <button *ngIf="allGamesFinished"
            (click)="openFinishTournamentDialog()"
            type="button"
            class="positive-background"
            md-raised-button>
      <md-icon>flag</md-icon>
      End Tournament
    </button>
    <button *ngIf="actualTournament.visibleRound < actualTournament.actualRound"
            (click)="publishRound()"
            type="button"
            class="positive-background"
            md-raised-button>
      <md-icon>cloud_upload</md-icon>
      Publish Round
    </button>
    <button (click)="openKillRoundDialog()"
            type="button"
            class="negative-background"
            md-raised-button>
      <md-icon>warning</md-icon>
      Kill Round
    </button>
  </md-card>
</div>
<div class="content-cards-container">
  <md-card *ngIf="!rankingsFullscreenMode">
    <h3 class="heading">Games for round {{round}}</h3>
    <mdl-icon *ngIf="!gamesFullscreenMode" (click)="openGamesFullScreenMode(true)" mdTooltip="Fullscreen Mode" class="fullscreen-mode">fullscreen</mdl-icon>
    <mdl-icon *ngIf="gamesFullscreenMode" (click)="openGamesFullScreenMode(false)" mdTooltip="Exit Fullscreen Mode" class="fullscreen-mode">fullscreen_exit</mdl-icon>
    <mdl-icon *ngIf="!gamesTableMode" (click)="changeToTableMode(true)" mdTooltip="Table Mode" class="table-mode">list</mdl-icon>
    <mdl-icon *ngIf="gamesTableMode" (click)="changeToTableMode(false)" mdTooltip="Exit Table Mode" class="table-mode">view_list</mdl-icon>

    <mdl-textfield *ngIf="!gamesFullscreenMode"
                   type="text"
                   maxlength="50"
                   placeholder="Filter by PlayerName"
                   #seachInput
                   (keyup)="search(seachInput.value)" >
    </mdl-textfield>
    <h4 *ngIf="allGamesFiltered?.length == 0" class="warning-text">No Games found (Filter?)</h4>
    <tournament-game-list *ngIf="!gamesTableMode"
      [actualTournament]="actualTournament"
      [authenticationStoreState$]="authenticationStoreState$"
      [actualTournamentArmyLists$]="actualTournamentArmyLists$"
      [gamesForRound]="allGamesFiltered"
      [rankingsForRound$]="rankingsForRound$"
      (onGameResult)="handleGameResult($event)"
      (onSwapPlayer)="handleSwapPlayer($event)"
    ></tournament-game-list>

    <tournament-game-table *ngIf="gamesTableMode"
                          [games]="allGamesFiltered"
    ></tournament-game-table>
  </md-card>
  <md-card *ngIf="!gamesFullscreenMode">
    <h3 class="heading">Ranking for round {{round}}</h3>
    <mdl-icon *ngIf="!rankingsFullscreenMode" (click)="openRankingsFullScreenMode(true)" mdTooltip="Fullscreen Mode" class="fullscreen-mode">fullscreen</mdl-icon>
    <mdl-icon *ngIf="rankingsFullscreenMode" (click)="openRankingsFullScreenMode(false)" mdTooltip="Exit Fullscreen Mode" class="fullscreen-mode">fullscreen_exit</mdl-icon>
    <tournament-ranking-table
      [actualTournamentArmyList$]="armyLists$"
      [rankingsForRound$]="rankingsForRound$"
      [userPlayerData]="userPlayerData"
    ></tournament-ranking-table>
  </md-card>
</div>
